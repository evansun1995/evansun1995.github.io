(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{400:function(t,a,s){"use strict";s.r(a);var n=s(54),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"前端安全性问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端安全性问题"}},[t._v("#")]),t._v(" 前端安全性问题")]),t._v(" "),s("p",[s("strong",[t._v("参考文章：")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zoumiaojiang.com/article/common-web-security/#sql",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见 Web 安全攻防总结"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6844903842635579405",target:"_blank",rel:"noopener noreferrer"}},[t._v("【面试篇】寒冬求职之你必须要懂的Web安全"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6844903685122703367",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端安全系列（一）：如何防止XSS攻击？"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6844903689702866952",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端安全系列之二：如何防止CSRF攻击？"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("任何一个网站都会有被攻击的风险，作为一名前端，安全性问题是必须要知道的。\n前端攻击方式有：XSS攻击、CSRF攻击 以及 点击劫持。\n服务端的攻击方式有：SQL 注入、命令行注入、DDoS 攻击、流量劫持 和 服务器漏洞等。")]),t._v(" "),s("h2",{attrs:{id:"xss-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击"}},[t._v("#")]),t._v(" XSS 攻击")]),t._v(" "),s("p",[t._v("XSS 全称 Cross-Site Scripting，中文名 跨站脚本攻击。攻击者在目标网站上注入恶意代码，当用户访问网站时就会执行恶意代码，从而获取用户关键信息。\n根据攻击的来源，XSS 攻击分为三种。")]),t._v(" "),s("h3",{attrs:{id:"_1-反射型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-反射型-xss"}},[t._v("#")]),t._v(" 1. 反射型 XSS")]),t._v(" "),s("p",[t._v("攻击者构造出含有攻击脚本的 URL，一般是以参数的形式，如：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("www.xxx.com?keyword=<script>alert("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("攻击代码"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(")<\/script>"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是恶意链接"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("当用户打开时，网站服务端预渲染时，直接将含有脚本的内容直接插入到 html 中，浏览器渲染后会直接执行脚本中的代码。")]),t._v(" "),s("h3",{attrs:{id:"_2-存储型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-存储型-xss"}},[t._v("#")]),t._v(" 2. 存储型 XSS")]),t._v(" "),s("p",[t._v("存储型XSS又被称为持久型 XSS，他通过前端将攻击代码提交后端并存储到数据库中，最典型的列子就是留言板。")]),t._v(" "),s("h3",{attrs:{id:"_3-dom-型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-dom-型-xss"}},[t._v("#")]),t._v(" 3. DOM 型 XSS")]),t._v(" "),s("p",[t._v("类似反射型 XSS，DOM 型 XSS 指的是由前端解析 URL 中的字段时，将含有攻击的脚本直接插入到 DOM 中，渲染后执行产生 XSS 攻击，与上述两种相比，DOM 型完全是由前端造成的。")]),t._v(" "),s("h3",{attrs:{id:"xss-攻击方式总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击方式总结"}},[t._v("#")]),t._v(" XSS 攻击方式总结")]),t._v(" "),s("ol",[s("li",[t._v("在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。")]),t._v(" "),s("li",[t._v("在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。")]),t._v(" "),s("li",[t._v("在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。")]),t._v(" "),s("li",[t._v("在标签的 href、src 等属性中，包含 javascript: 等可执行代码。")]),t._v(" "),s("li",[t._v("在 onload、onerror、onclick 等事件中，注入不受控制代码。")]),t._v(" "),s("li",[t._v('在 style 属性和标签中，包含类似 background-image:url("javascript:..."); 的代码（新版本浏览器已经可以防范）。')]),t._v(" "),s("li",[t._v("在 style 属性和标签中，包含类似 expression(...) 的 CSS 表达式代码（新版本浏览器已经可以防范）。")])]),t._v(" "),s("h3",{attrs:{id:"xss-防御方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-防御方案"}},[t._v("#")]),t._v(" XSS 防御方案")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("限制输入\n限制用户输入的内容，适合如：邮箱、用户名、手机号 等固定格式场景。")])]),t._v(" "),s("li",[s("p",[t._v("纯前端渲染\n在不考虑 SEO 的情况下，采用纯前端渲染，避免使用"),s("code",[t._v("innerHTML")]),t._v("api，改用"),s("code",[t._v("textContent")]),t._v("、"),s("code",[t._v("innerText")]),t._v("等方法插入内容。如果是 Vue / React 技术栈，其内置的模板渲染引擎 以及  "),s("code",[t._v("v-html")]),t._v("/"),s("code",[t._v("dangerouslySetInnerHTML")]),t._v("方法，都会自动对内容中的特殊字符进行转义。但是该方法对于 href、src 等属性、onload、onclick等事件没有很好的处理方法，必须保证拼接上的字符串是100%可信的再使用。")])]),t._v(" "),s("li",[s("p",[t._v("后端转义\n如果需要用到后端渲染（SSR），需要对HTML模板各处插入节点进行充分转义，尽量选择一个成熟的转义库，如 JAVA 中，常用的转义库为"),s("code",[t._v("org.owasp.encoder")]),t._v("。\n另外对于所有前端传入、数据库中的数据，后端在读写时，都应该对特殊字符进行转义。")])]),t._v(" "),s("li",[s("p",[t._v("CSP\nCSP 全称网页安全策略（Content-Security-Policy），用来限制网站各类资源的加载，可以在"),s("code",[t._v("meta")]),t._v("标签 或者 HTTP 请求头中配置。\n详见："),s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/09/csp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Content Security Policy 入门教程"),s("OutboundLink")],1)])])]),t._v(" "),s("h3",{attrs:{id:"xss-的检测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-的检测"}},[t._v("#")]),t._v(" XSS 的检测")]),t._v(" "),s("p",[t._v("自动扫描工具有，例如 "),s("a",{attrs:{href:"https://github.com/Arachni/arachni",target:"_blank",rel:"noopener noreferrer"}},[t._v("Arachni"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/mozilla/http-observatory/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mozilla HTTP Observatory"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://github.com/andresriancho/w3af",target:"_blank",rel:"noopener noreferrer"}},[t._v("w3af"),s("OutboundLink")],1),t._v(" 等。")]),t._v(" "),s("h2",{attrs:{id:"csrf-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf-攻击"}},[t._v("#")]),t._v(" CSRF 攻击")]),t._v(" "),s("p",[t._v("CSRF 全称 Cross-Site Request Forgery，中文名 跨站请求伪造攻击。"),s("br"),t._v("\n个人理解是：CSRF 攻击一般只对使用 cookie 传递登录凭证的网站生效（除非网站不需要登录凭证就能调用关键接口），对于使用 token 作为验证方式的网站无效。"),s("br"),t._v("\n攻击通常通过第三方网站发起，当用户在被攻击网站的 cookie 中存有登录凭证时，攻击者利用浏览器发起请求会携带 cookie 的特性，利用用户的凭证绕开服务器的验证，向被攻击网站发起接口请求进行攻击。")]),t._v(" "),s("h3",{attrs:{id:"常见-csrf-攻击方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见-csrf-攻击方式"}},[t._v("#")]),t._v(" 常见 CSRF 攻击方式")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("GET 请求 CSRF："),s("br"),t._v("\n这类脚本攻击很简单，一般通过"),s("code",[t._v("img")]),t._v("标签发起,攻击网站构造类似：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 攻击网站 --\x3e")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://bank.example/withdraw?amount=10000&for=hacker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("POST 请求 CSRF："),s("br"),t._v("\n这类请求一般通过"),s("code",[t._v("form")]),t._v("表单进行提交：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 攻击网站 --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("form")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://bank.example/withdraw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("account"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("xiaoming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("10000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hidden"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("for"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("hacker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("form")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("submit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n")])])])]),t._v(" "),s("li",[s("p",[t._v("链接型 CSRF："),s("br"),t._v("\n本质也是一种 GET 请求，相比上述两种，这种请求不需要三方网站发起攻击，而是利用被攻击网站的接口漏洞，构造 GET 请求参数，诱导用户点击链接发起请求。")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 任意其他网站中 --\x3e")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://bank.example/withdraw?amount=10000&for=hacker"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("诱导链接"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"csrf-防御方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf-防御方案"}},[t._v("#")]),t._v(" CSRF 防御方案")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("验证码："),s("br"),t._v("\n对于关键接口，使用验证码可以极大提升该接口的安全性，但是相对的也牺牲了一定用户体验，因此只适合安全性要求较高的接口。")])]),t._v(" "),s("li",[s("p",[t._v("使用 Token："),s("br"),t._v("\n目前主流防御 CSRF 攻击的方案就是 Token，对于新项目可以直接使用 Token 替代 Cookie 传递用户凭证，对于使用 Cookie 的老项目，可以通过合适的方式生成 Token 进行校验。")])]),t._v(" "),s("li",[s("p",[t._v("禁止跨域访问："),s("br"),t._v("\n我们知道 CSRF 攻击主要是通过第三方网发起，服务端在处理请求时，统一判断请求的来源（请求头中的 Origin 和 Referer 字段），只有相同域名的请求（或者绝对信任的），但是请求头容易被篡改，而且还需要处理搜索引擎爬虫的问题，需要深入的去学了解一下。")])]),t._v(" "),s("li",[s("p",[t._v("Cookie 设置"),s("code",[t._v("Samesite")]),s("br"),t._v("\nChrome 51 开始新增的 Cookie 属性，用来限制浏览器的 Cookie 携带机制，属于较新属性，有兼容问题。")])])]),t._v(" "),s("h2",{attrs:{id:"点击劫持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持"}},[t._v("#")]),t._v(" 点击劫持")]),t._v(" "),s("h3",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[t._v("点击劫持主要是 在第三方网站采用 iframe 的形式，将被攻击的网站嵌入，一般会将该 iframe 设置为透明，在特殊按钮位置增加诱导点击按钮，用户以为点击的是第三方网站的内容，但是实际上已经被攻击了。")]),t._v(" "),s("h3",{attrs:{id:"点击劫持-防御方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击劫持-防御方案"}},[t._v("#")]),t._v(" 点击劫持 防御方案")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("JS 判断："),s("br"),t._v("\n使用 JS 代码主动判断是否在 iframe 环境中，但是攻击网站只要在 iframe 中设置"),s("code",[t._v("sandbox")]),t._v("属性，即可禁止被攻击网站中的 JS 代码执行，因此作用有限。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("X-FRAME-OPTIONS："),s("br"),t._v("\nX-FRAME-OPTIONS 是微软提出的一个 http 头，专门用来防御利用 iframe 嵌套的点击劫持攻击。并且在 IE8、Firefox3.6、Chrome4 以上的版本均能很好的支持。可以设置为以下值：")]),t._v(" "),s("ul",[s("li",[t._v("DENY：拒绝任何域加载")]),t._v(" "),s("li",[t._v("SAMEORIGIN：允许同源域下加载")]),t._v(" "),s("li",[t._v("ALLOW-FROM：可以定义允许 frame 加载的页面地址")])])])]),t._v(" "),s("h2",{attrs:{id:"其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),s("p",[t._v("与前端有关的 攻击方式 主要是 XSS、XSRF 和 点击劫持。下面简单介绍一下其他几种攻击方式，不做深入探讨。")]),t._v(" "),s("h3",{attrs:{id:"_1-sql-注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-sql-注入"}},[t._v("#")]),t._v(" 1. SQL 注入")]),t._v(" "),s("p",[t._v("一般常见于后端将前端传递的数据直接拼接到 SQL 查询字符串，攻击者通过填写包含类似"),s("code",[t._v("OR 1 = 1")]),t._v("这样的字符串，篡改后端 SQL 查询输入，获取任意想要的数据。一般后台通过使用数据库提供的参数化查询接口（占位符）即可避免。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Nodejs 使用 mysql 的 query 方法，问号为占位符")]),t._v("\nmysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("SELECT * FROM user WHERE username = ? AND psw = ?")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" psw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-命令行注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-命令行注入"}},[t._v("#")]),t._v(" 2. 命令行注入")]),t._v(" "),s("p",[t._v("类似于 SQL 注入，只不过攻击者的代码是作用于命令行中，常用解决方法是严格限制输入的内容，采用正则校验，并适当进行转义处理。")]),t._v(" "),s("h3",{attrs:{id:"_3-ddos-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ddos-攻击"}},[t._v("#")]),t._v(" 3. DDoS 攻击")]),t._v(" "),s("p",[t._v("该攻击方式是通过频繁发起请求，大量占用服务器资源，导致服务不可用。DDoS 攻击分为"),s("code",[t._v("网络层攻击")]),t._v("与"),s("code",[t._v("应用层攻击")]),t._v("，这里不展开描述。一般解决方案是：限制单 IP 请求频率、添加验证码、合理使用缓存、服务器配置负载均衡等方式解决。")]),t._v(" "),s("h3",{attrs:{id:"_4-流量劫持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-流量劫持"}},[t._v("#")]),t._v(" 4. 流量劫持")]),t._v(" "),s("p",[t._v("流量劫持分为 DNS 劫持 和 HTTP 劫持，当用户访问资源时，返回恶意网站的内容。一般来说 DNS 劫持没有好的解决方法，HTTP 劫持可以换用 HTTPS。")]),t._v(" "),s("h3",{attrs:{id:"_5-服务器漏洞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-服务器漏洞"}},[t._v("#")]),t._v(" 5. 服务器漏洞")]),t._v(" "),s("p",[t._v("服务器软件本身以及开发者的一些配置的疏忽，都容易造成被攻击的漏洞，比如最近一次的"),s("code",[t._v("Apache Log4j2")]),t._v("的漏洞，开发者在使用时一定要选择稳定合适的版本，发现问题及时升级修复漏洞。")])])}),[],!1,null,null,null);a.default=r.exports}}]);