# HTTP与HTTPS

## http
超文本传输协议，是万维网数据通信的基础，上层是基于TCP/IP协议。  
建立TCP请求需要经历三次握手，四次挥手。  
HTTP版本分为1.0（1996年）、1.1（1999年）和2.0（2013年）。  

### HTTP1.0
最原始的HTTP请求版本，每次请求都需要与服务器简历一个TCP连接，经历三次握手四次挥手，成本很高。

### HTTP1.1
相比1.0做了如下升级：
1. 缓存处理策略优化，`Cache-Control`增加`max-age`值取代1.0中的`Expires`，此外还增加了多个缓存头，如`Entity tag`，`If-Unmodified-Since`， `If-Match`，`If-None-Match`等。
2. 支持持久连接，HTTP1.1建立TCP连接默认不关闭，可以被复用，对于同一个域名，大多数浏览器允许同时简历6个持久连接。
3. 增加 range 头域，它允许只请求资源的某个部分，即返回码是206（Partial Content），使得服务器支持断点续传。
4. 新增响应状态码。
5. 新增请求方式，如`PUT`、`DELETE`、`OPTIONS`等。

**缺点**：在同一时间内，同一域名的请求数量限制（6条），超过限制数目的请求会被阻塞，且同一个TCP连接按顺序依次进行。

### HTTP2.0
谷歌推荐HTTP2.0结合HTTPS使用，相比1.1做了如下升级：
1. 复用TCP连接， 在同一个连接里，没有数量限制，可以同时发送多个请求或回应，且不用按顺序进行。
2. 采用二进制格式传输。
3. 报头压缩，使用缓存（设置报头信息表，缓存后只发送索引）。
4. 服务器推送。

## HTTPS
HTTP请求的升级版，在HTTP和TCP之间增加一层SSL（/TLS）层，解决了HTTP请求明文传输存在的安全性问题。
相比HTTP请求：
1. 需要申请ca证书。
2. 默认端口号443。
3. 采用SSL加密传输协议，采用 加密算法加密数据+非对称加密算法交换密钥+数字证书验证身份 的安全策略，之所以不使用公钥加密主要是为了双向加密，如果使用公钥加密，服务端加密后需要把私钥传给客户端，增加泄密风险。
  